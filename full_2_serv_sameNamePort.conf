# -----------------------------------------------------------------
# Full configuration file for testing parser and validation
# -----------------------------------------------------------------

server {
    listen 8080;
    server_name localhost;
    root www/full_test;

    upload_path uploads;

    # Default error pages
    error_page 400 www/errors/400.html;
	error_page 403 www/errors/403.html;
	error_page 404 www/errors/404.html;
	error_page 413 www/errors/413.html;
    error_page 500 www/errors/500.html;

    # Maximum allowed body size in bytes
    client_max_body_size 100000000;

    # Index files to look for
    index full_test.html;

    # CGI configuration
    cgi_path /usr/bin/php-cgi;
    cgi_extension .php;

    # ---------------------------------
    # Locations
    # ---------------------------------

    location / {
        root www/full_test;
        index full_test.html;
        upload_path uploads/main;
        methods GET;
    }

    location /calculator {
        root www/full_test;
        index calculator.html;
        methods GET;
    }

    location /calculate-cgi {
        root www/cgi;
        index calculator.py;
        cgi_path /usr/bin/python3;
        cgi_extension .py;
        methods GET POST;
    }

    location /gallery {
        root www/cgi;
        index lister.py;
        cgi_path /usr/bin/python3;
        cgi_extension .py;
        methods GET;
    }

    location /upload {
        root www/full_test;
        index upload.html;
        methods GET;
    }

    location /uploads {
        root www;
        upload_path uploads;
        methods GET POST DELETE;
    }

    location /cgi-bin {
        root www/cgi;
        upload_path uploads/cgi;
        cgi_path /usr/bin/python3;
        cgi_extension .py;
        methods GET POST;
    }
}

# -----------------------------------------------------------------
# Second server block for multi-server testing
# -----------------------------------------------------------------

server {
    listen 8080;
    server_name localhost;
    root www;

    upload_path www/uploads;
	error_page 400 www/errors/400.html;
    error_page 404 www/404.html;
    index index_testing.html;

    location / {
        root www;
        index index_testing.html;
        upload_path www/uploads;
        methods GET;
    }
}


